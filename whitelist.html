<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whitelist - Strax Dashboard</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="page-content">
<header>
<div>
<nav>
<a href="home.html">Home</a>
<a href="whitelist.html" class="active">Whitelist</a>
<a href="console.html">Console</a>
</nav>
</div>
<div class="account">
<button onclick="toggleDropdown()">Shadow â–¼</button>
<div class="dropdown" id="account-dropdown">
<a href="#" onclick="changePassword()">Change Password</a>
<a href="#" onclick="logout()">Logout</a>
</div>
</div>
</header>

<div class="container">
<h1>Whitelist</h1>
<button class="add-btn" onclick="showAddPopup()">Add Player</button>
<button class="remove-btn" onclick="showRemovePopup()">Remove Player</button>

<div id="whitelist-list" class="card">Loading whitelist...</div>
</div>

<!-- Add Popup -->
<div class="popup" id="add-popup">
<h3>Add Player</h3>
<input type="text" id="add-username" placeholder="Minecraft Username">
<input type="text" id="add-discord" placeholder="Discord ID (optional)">
<button onclick="addPlayer()">Add</button>
<button onclick="hideAddPopup()">Close</button>
</div>

<!-- Remove Popup -->
<div class="popup" id="remove-popup">
<h3>Remove Player</h3>
<input type="text" id="remove-username" placeholder="Minecraft Username">
<input type="text" id="remove-discord" placeholder="Discord ID (optional)">
<button onclick="removePlayer()">Remove</button>
<button onclick="hideRemovePopup()">Close</button>
</div>

<script src="js/main.js"></script>
<script>
// WebSocket to fetch whitelist
const ws=new WebSocket('wss://whitelist.underhost.org/ws/whitelist');
ws.onmessage=e=>{
    const data=JSON.parse(e.data);
    const listEl=document.getElementById('whitelist-list');
    listEl.innerHTML='';
    data.forEach(p=>{
        const div=document.createElement('div'); 
        div.className='card'; 
        div.innerText=`${p.mcUsername} - ${p.discordId||'No Discord'}`;
        listEl.appendChild(div);
    });
};

// Popups
function showAddPopup(){document.getElementById('add-popup').classList.add('active');}
function hideAddPopup(){document.getElementById('add-popup').classList.remove('active');}
function showRemovePopup(){document.getElementById('remove-popup').classList.add('active');}
function hideRemovePopup(){document.getElementById('remove-popup').classList.remove('active');}

// Mock add/remove (replace with API calls)
function addPlayer(){ alert('Player added (mock)'); hideAddPopup();}
function removePlayer(){ alert('Player removed (mock)'); hideRemovePopup();}
</script>
</body>
</html>
