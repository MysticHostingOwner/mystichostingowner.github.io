<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home - Strax Dashboard</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="page-content">
<header>
<div>
<nav>
<a href="home.html" class="active">Home</a>
<a href="whitelist.html">Whitelist</a>
<a href="console.html">Console</a>
</nav>
</div>
<div class="account">
<button onclick="toggleDropdown()">Shadow â–¼</button>
<div class="dropdown" id="account-dropdown">
<a href="#" onclick="changePassword()">Change Password</a>
<a href="#" onclick="logout()">Logout</a>
</div>
</div>
</header>

<div class="container">
<h1 style="font-size:2rem;margin-bottom:1rem;">Welcome, Shadow</h1>
<div class="card">
<div class="status" id="server-status"><span></span>Checking server...</div>
<div>Whitelisted players: <span id="whitelist-count">0</span></div>
</div>
</div>
</div>

<script src="js/main.js"></script>
<script>
// WebSocket for server status and whitelist count
const wsStatus=new WebSocket('wss://whitelist.underhost.org/ws/status');
wsStatus.onmessage=e=>{
    const data=JSON.parse(e.data);
    const el=document.getElementById('server-status');
    el.className='status '+(data.online?'online':'offline');
    el.innerHTML=`<span></span>Server ${data.online?'Online':'Offline'}`;
    document.getElementById('whitelist-count').innerText=data.whitelistCount;
};
</script>
</body>
</html>
