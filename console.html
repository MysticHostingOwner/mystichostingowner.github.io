<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Console - Strax Dashboard</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div id="page-content">
<header>
<div>
<nav>
<a href="home.html">Home</a>
<a href="whitelist.html">Whitelist</a>
<a href="console.html" class="active">Console</a>
</nav>
</div>
<div class="account">
<button onclick="toggleDropdown()">Shadow â–¼</button>
<div class="dropdown" id="account-dropdown">
<a href="#" onclick="changePassword()">Change Password</a>
<a href="#" onclick="logout()">Logout</a>
</div>
</div>
</header>

<div class="container">
<h1>Console</h1>
<div class="card" id="console-log">Connecting to server...</div>
<input type="text" id="console-input" placeholder="Type command and press Enter" onkeydown="if(event.key==='Enter'){sendCommand();}">
<button class="send-btn" onclick="sendCommand()">Send</button>
</div>
</div>

<script src="js/main.js"></script>
<script>
// WebSocket live console
const wsConsole=new WebSocket('wss://whitelist.underhost.org/ws/console');
const consoleLog=document.getElementById('console-log');
wsConsole.onmessage=e=>{
    const msg=JSON.parse(e.data).message;
    consoleLog.innerText+=msg+'\n';
    consoleLog.scrollTop=consoleLog.scrollHeight;
};

// Send command
function sendCommand(){
    const input=document.getElementById('console-input');
    const cmd=input.value.trim();
    if(cmd && wsConsole.readyState===WebSocket.OPEN){
        wsConsole.send(JSON.stringify({command:cmd}));
        input.value='';
    }
}
</script>
</body>
</html>
